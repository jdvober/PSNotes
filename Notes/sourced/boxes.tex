%%%%%%%%%%%%%%
% Custom Boxes
% See https://www.overleaf.com/learn/latex/Environments#Defining_a_new_environment
%%%%%%%%%%%%%%
\usepackage[most]{tcolorbox} % Colorful boxes on the page
\usepackage{mdframed} % Boxes without titles


\newenvironment{boxPink}[1]{%
  \begin{tcolorbox}[enhanced, colback=dracPink!75!black!10!white,colframe=dracPink,title=#1,breakable]
    }{
  \end{tcolorbox}
}

\newenvironment{boxRed}[1]{%
  \begin{tcolorbox}[enhanced, colback=dracRed!25!black!10!white,colframe=dracRed!75!black,title=#1,breakable]
    }{
  \end{tcolorbox}
}

\newenvironment{boxOrange}[1]{%
  \begin{tcolorbox}[enhanced, colback=dracOrange!75!black!10!white,colframe=dracOrange,title=#1,breakable]
    }{
  \end{tcolorbox}
}

\newenvironment{boxYellow}[1]{%
  \begin{tcolorbox}[enhanced, colback=dracYellow!75!black!10!white,colframe=dracYellow,coltitle=black,title=#1,breakable]
    }{
  \end{tcolorbox}
}

\newenvironment{boxGold}[1]{%
  \begin{tcolorbox}[enhanced, colback=dracGold!75!black!10!white,colframe=dracGold,coltitle=black,title=#1,breakable]
    }{
  \end{tcolorbox}
}
\newenvironment{boxYellowGreen}[1]{%
  \begin{tcolorbox}[enhanced, colback=dracYellowGreen!75!black!10!white,colframe=dracYellowGreen,title=#1,breakable]
    }{
  \end{tcolorbox}
}
\newenvironment{boxTan}[1]{%
  \begin{tcolorbox}[enhanced, colback=dracTan!75!black!10!white,colframe=dracTan,title=#1,breakable]
    }{
  \end{tcolorbox}
}

\newenvironment{boxCurrentLine}[1]{%
  \begin{tcolorbox}[enhanced, colback=dracCl!75!black!10!white,colframe=dracCl,title=#1,breakable]
    }{
  \end{tcolorbox}
}

\newenvironment{boxComment}[1]{%
  \begin{tcolorbox}[enhanced, colback=dracCl!75!black!10!white,colframe=dracCl,title=#1,breakable]
    }{
  \end{tcolorbox}
}

\newenvironment{boxBackground}[1]{%
  \begin{tcolorbox}[enhanced, colback=dracCl!75!black!10!white,colframe=dracCl,title=#1,breakable, boxrule=4pt, rightrule=8pt, bottomrule=8pt,]
    }{
  \end{tcolorbox}
}

\newenvironment{boxGray}[1]{%
  \begin{tcolorbox}[enhanced, colback=dracCl!75!black!10!white,colframe=dracCl,title=#1,breakable]
    }{
  \end{tcolorbox}
}

\newenvironment{boxGrey}[1]{%
  \begin{tcolorbox}[enhanced, colback=dracCl!75!black!10!white,colframe=dracCl,title=#1,breakable]
    }{
  \end{tcolorbox}
}

\newenvironment{boxGreen}[1]{%
  \begin{tcolorbox}[enhanced, colback=dracGreen!25!black!10!white,colframe=dracGreen!75!black,title=#1,breakable]
    }{
  \end{tcolorbox}
}


\newenvironment{boxCyan}[1]{%
  \begin{tcolorbox}[enhanced, colback=dracCyan!25!black!10!white,colframe=dracCyan!75!black,title=#1,breakable]
    }{
  \end{tcolorbox}
}

\newenvironment{boxBlue}[1]{%
  \begin{tcolorbox}[enhanced, colback=blue!25!black!10!white,colframe=blue!75!black,title=#1,breakable]
    }{
  \end{tcolorbox}
}


\newenvironment{boxPurple}[1]{%
  \begin{tcolorbox}[enhanced, colback=dracPurple!75!black!10!white,colframe=dracPurple,title=#1,breakable]
    }{
  \end{tcolorbox}
}

\newenvironment{boxMassillon}[1]{%
  \begin{tcolorbox}[enhanced, colback=dracGray,coltitle=massillonOrange,colframe=black,coltext=white,title=#1,breakable]
    }{
  \end{tcolorbox}
}

\newenvironment{boxClear}{%
  \begin{tcolorbox}[enhanced, colback=white,colframe=black,breakable]
    }{
  \end{tcolorbox}
}

\newenvironment{boxBluePointy}{
  \begin{tcolorbox}[enhanced,sharp corners=uphill,
      colback=blue!50!white,colframe=blue!25!black,coltext=yellow,
      fontupper=\Large\bfseries,arc=6mm,boxrule=2mm,boxsep=5mm,
      borderline={0.3mm}{0.3mm}{white}, breakable]}
    {\end{tcolorbox}}

\newenvironment{boxBox}[1]{
  \begin{tcolorbox}[enhanced,attach boxed title to top center={yshift=-3mm,yshifttext=-1mm},
      colback=blue!5!white,colframe=black,colbacktitle=orange!80!black,
      title=#1,fonttitle=\bfseries, breakable,
      boxed title style={size=small,colframe=black}]
    }{
  \end{tcolorbox}
}

\newenvironment{formulaBox}[1]{
  \begin{tcolorbox}[enhanced,attach boxed title to top center={yshift=-3mm,yshifttext=-1mm}, colback=dracBg!70,colframe=dracPurple,boxrule=4pt, rightrule=8pt, bottomrule=8pt, colbacktitle=dracCurrentLine, coltitle=dracFg, title=#1 Formulas,fonttitle={\huge \bfseries}, breakable, boxed title style={size=small,colframe=black}]
    }{
  \end{tcolorbox}
}

% sidebyside makes the "upper" and "lower" sections of the box "left" and "right" instead.  You still split the sections with \tcblower.  If sidebyside is not set, \tcblower splits upper and lower.
\newenvironment{boxcompareHSplit}[1]{
  \begin{tcolorbox}[enhanced, colback=blue!25!black!10!white,colframe=blue!75!black, listing side text,sidebyside=false,breakable, title=#1]
    }{
  \end{tcolorbox}
}

\newenvironment{boxcompareVSplit}[1]{
  \begin{tcolorbox}[enhanced, colback=blue!25!black!10!white,colframe=blue!75!black, listing side text,sidebyside=true,breakable, title=#1]
    }{
  \end{tcolorbox}
}

% Triple Box
\newcommand\tribox[6]{%3 x titles, 3 columns
  \begin{tikzpicture}[%
      tabl/.style={draw,rounded corners=8pt, inner sep=3mm},%
      hd/.style={ draw,rounded corners=6pt,%
          minimum width=25mm,minimum height=6mm,%
          font=\bfseries, inner sep=2mm,fill=gray!20},%
    ]%
    \node[tabl] (A){ %
      \begin{tabular}{p{4cm}p{4cm}p{4cm}}%
        \\%
        #4 & #5 & #6 \\%
      \end{tabular}%
    };%
    \node[hd] at (A.north)               {};%
    \node[hd] at ([xshift=-42mm]A.north) {};%
    \node[hd] at ([xshift=+42mm]A.north) {};%
  \end{tikzpicture}}

% Ex:
%  \somebox{1}{2}{3}
%     {Here came the sun.}
%     {Here comes the sun.}
%     {Here would have come \dots the sun.}

% Fancy clouds for thought bubbles in the margins
\textwidth=\dimexpr\textwidth-1in\relax
\usepackage{tikz,tabto,lipsum}
\usetikzlibrary{shapes}
\newcommand\margincloud[1]{{%
      \tabto{\textwidth}%
      \llap{%
        \rule[-\dp\strutbox]{.5pt}{\dp\strutbox}%
        \rule[-\dp\strutbox]{\dimexpr\textwidth-\TabPrevPos\relax}{.5pt}%
        \kern-3pt
        \smash{\rlap{\rotatebox[origin=lb]{45}{\rule[-\dp\strutbox]{60pt}{.5pt}}}}}%
      \tabto*{\TabPrevPos}%
      \marginpar{%
        \smash{\begin{tikzpicture}
            \node [cloud, fill=blue!5, draw,cloud puffs=10,cloud puff arc=120,
              aspect=1.5, inner ysep=1em]{\parbox{1in}{\raggedright#1}};
          \end{tikzpicture}%
        }}%
    }}

